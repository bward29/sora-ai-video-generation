<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SORA Admin Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1>SORA Admin Dashboard</h1>

    <button class="refresh-button" onclick="loadPrompts()">Refresh Prompts</button>

    <div class="prompt-list" id="promptList">
        <div class="no-prompts">Loading prompts...</div>
    </div>

    <script>
        // Function to load prompts from localStorage
        function loadPrompts() {
            const promptList = document.getElementById('promptList');

            try {
                const storedPrompts = localStorage.getItem('soraPrompts');
                let prompts = [];

                if (storedPrompts) {
                    prompts = JSON.parse(storedPrompts);
                }

                if (prompts.length === 0) {
                    promptList.innerHTML = '<div class="no-prompts">No prompts submitted yet</div>';
                    return;
                }

                // Sort prompts by timestamp (newest first)
                prompts.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

                // Create HTML for each prompt
                let promptsHTML = '';
                for (const prompt of prompts) {
                    promptsHTML += `
                        <div class="prompt-item">
                            <div class="prompt-id">#${prompt.id}</div>
                            <div class="prompt-text">${prompt.prompt}</div>
                            <div class="prompt-time">${new Date(prompt.timestamp).toLocaleString()}</div>
                        </div>
                    `;
                }

                promptList.innerHTML = promptsHTML;
            } catch (error) {
                console.error('Error loading prompts:', error);
                promptList.innerHTML = '<div class="no-prompts">Error loading prompts. Please try again.</div>';
            }
        }

        // Add clear button
        const refreshButton = document.querySelector('.refresh-button');
        const clearButton = document.createElement('button');
        clearButton.textContent = 'Clear All Prompts';
        clearButton.className = 'refresh-button';
        clearButton.style.marginLeft = '10px';
        clearButton.style.backgroundColor = '#f44336';
        clearButton.onclick = function () {
            if (confirm('Are you sure you want to clear all prompts? This cannot be undone.')) {
                localStorage.removeItem('soraPrompts');
                loadPrompts();
            }
        };
        refreshButton.parentNode.appendChild(clearButton);

        // Load prompts when page loads
        document.addEventListener('DOMContentLoaded', loadPrompts);

        // Load prompts immediately as well (in case DOMContentLoaded already fired)
        loadPrompts();
    </script>
</body>

</html>